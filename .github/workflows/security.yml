name: ğŸ”’ å®‰å…¨æª¢æŸ¥

on:
  schedule:
    - cron: '0 0 * * 0'  # æ¯é€±æ—¥
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  dependency-review:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
    - name: ğŸ” ä¾è³´å¯©æŸ¥
      uses: actions/dependency-review-action@v3
    
  codeql:
    name: CodeQLåˆ†æ
    runs-on: ubuntu-latest
    permissions:
      security-events: write
    
    steps:
    - name: ğŸš€ æª¢å‡ºä»£ç¢¼
      uses: actions/checkout@v4
    
    - name: ğŸ” åˆå§‹åŒ–CodeQL
      uses: github/codeql-action/init@v2
      with:
        languages: python
    
    - name: ğŸ—ï¸ è‡ªå‹•æ§‹å»º
      uses: github/codeql-action/autobuild@v2
    
    - name: ğŸ” åŸ·è¡ŒCodeQLåˆ†æ
      uses: github/codeql-action/analyze@v2
      with:
        category: "/language:python"
    
  snyk:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
    - name: ğŸ è¨­ç½®Python
      uses: actions/setup-python@v4
      with:
        python-version: "3.12"
    
    - name: ğŸ”’ é‹è¡ŒSnykæƒæ
      uses: snyk/actions/python@master
      env:
        SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
      with:
        args: --severity-threshold=high
